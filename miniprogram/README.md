# 旅游日记微信小程序

基于微信小程序原生开发的旅游日记应用，帮助用户记录旅行足迹、分享旅途故事。

## 项目简介

本项目是一个完整的旅游日记系统的微信小程序前端，包含用户端和管理员后台两大模块。用户可以记录旅行日记、查看地图足迹、获取实时天气、发现附近推荐商户；管理员可以进行用户管理、内容审核和数据统计。

## 功能特性

### 用户端功能

**日记管理**：支持创建、编辑、删除旅游日记，支持图文混排，可添加多张图片，自动记录位置和天气信息。

**地图足迹**：在地图上展示所有日记发布地点，支持点击标记查看详情，统计已到访的城市和省份数量。

**天气查询**：接入Open-Meteo免费天气API，获取实时天气数据和7天预报，支持热门城市快速切换，提供穿衣、雨伞、运动等旅行建议。

**附近推荐**：展示附近的餐厅、酒店、景点等商户信息，支持分类筛选，提供电话和导航功能。

**个人中心**：展示用户统计数据，提供各功能入口，支持登录退出和缓存清理。

### 管理员后台

**数据统计**：展示总用户数、总日记数、总足迹数、今日新增等核心运营数据。

**用户管理**：查看用户列表，支持搜索，可禁用或启用用户账号。

**内容审核**：查看所有日记内容，支持按状态筛选，可屏蔽或删除违规内容。

## 技术栈

本项目采用微信小程序原生开发技术栈，主要包括WXML模板语言、WXSS样式语言、JavaScript逻辑层，以及微信小程序提供的各类API（地图、定位、网络请求等）。

## 项目结构

```
miniprogram/
├── app.js                 # 小程序入口文件
├── app.json               # 小程序全局配置
├── app.wxss               # 小程序全局样式
├── project.config.json    # 项目配置文件
├── images/                # 图片资源目录
├── utils/                 # 工具函数
│   ├── api.js            # API请求封装
│   └── util.js           # 通用工具函数
└── pages/                 # 页面目录
    ├── index/            # 首页
    ├── diary-list/       # 日记列表
    ├── diary-detail/     # 日记详情
    ├── diary-edit/       # 日记编辑
    ├── footprints/       # 地图足迹
    ├── weather/          # 天气查询
    ├── nearby/           # 附近推荐
    ├── profile/          # 个人中心
    └── admin/            # 管理后台
```

## 使用说明

### 开发环境准备

首先下载并安装微信开发者工具，可从微信官方网站获取最新版本。

### 导入项目

打开微信开发者工具，选择"导入项目"，项目目录选择 `miniprogram` 文件夹，填入你的小程序 AppID（如果没有可以使用测试号）。

### 配置说明

在 `utils/api.js` 中配置后端API地址：

```javascript
const BASE_URL = 'https://your-api-domain.com/api';
```

### 图片资源

TabBar图标和其他图片资源需要自行准备，放入 `images` 目录。建议使用阿里巴巴矢量图标库等免费资源。

### 权限配置

小程序需要以下权限才能正常运行：

| 权限 | 用途 |
|------|------|
| scope.userLocation | 获取用户位置，用于天气查询和附近推荐 |
| scope.chooseLocation | 选择位置，用于日记定位 |
| scope.userInfo | 获取用户信息，用于登录 |

## API接口

小程序前端调用后端API进行数据交互，主要接口包括：

| 接口 | 方法 | 说明 |
|------|------|------|
| /api/trpc/diary.list | GET | 获取日记列表 |
| /api/trpc/diary.create | POST | 创建日记 |
| /api/trpc/diary.update | POST | 更新日记 |
| /api/trpc/diary.delete | POST | 删除日记 |
| /api/trpc/weather.current | GET | 获取当前天气 |
| /api/trpc/admin.stats | GET | 获取统计数据 |
| /api/trpc/admin.users | GET | 获取用户列表 |
| /api/trpc/admin.diaries | GET | 获取日记审核列表 |

## 注意事项

1. 小程序需要在微信公众平台注册并获取AppID才能发布上线
2. 地图功能需要在小程序后台配置腾讯地图密钥
3. 网络请求需要在小程序后台配置合法域名
4. 天气API使用的是Open-Meteo免费接口，无需申请密钥

## 版本信息

当前版本：1.0.0

## 开发者

旅游日记团队
