<!--åœ°å›¾è¶³è¿¹é¡µ-->
<view class="page">
  <!-- åœ°å›¾ -->
  <map 
    id="footprintMap"
    class="map"
    latitude="{{center.latitude}}"
    longitude="{{center.longitude}}"
    scale="{{scale}}"
    markers="{{markers}}"
    show-location
    bindmarkertap="onMarkerTap"
    bindregionchange="onRegionChange"
  ></map>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-bar">
    <view class="stat-item">
      <text class="stat-value">{{footprints.length}}</text>
      <text class="stat-label">è¶³è¿¹ç‚¹</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{cities.length}}</text>
      <text class="stat-label">åŸå¸‚</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{provinces.length}}</text>
      <text class="stat-label">çœä»½</text>
    </view>
  </view>

  <!-- è¶³è¿¹åˆ—è¡¨ -->
  <view class="footprint-list">
    <view class="list-header">
      <text class="list-title">æˆ‘çš„è¶³è¿¹</text>
    </view>
    <scroll-view scroll-y class="list-scroll">
      <view class="footprint-item" wx:for="{{footprints}}" wx:key="id" bindtap="goToDetail" data-id="{{item.diaryId}}">
        <view class="footprint-marker" style="background-color: {{item.color}}">
          <text>{{index + 1}}</text>
        </view>
        <view class="footprint-info">
          <text class="footprint-name">{{item.locationName}}</text>
          <text class="footprint-date">{{item.dateText}}</text>
        </view>
        <text class="footprint-arrow">></text>
      </view>
      <view class="empty-tip" wx:if="{{footprints.length === 0}}">
        <text>è¿˜æ²¡æœ‰è¶³è¿¹ï¼Œå¿«å»è®°å½•æ—…è¡Œå§ï¼</text>
      </view>
    </scroll-view>
  </view>

  <!-- å®šä½æŒ‰é’® -->
  <view class="location-btn" bindtap="moveToLocation">
    <text>ğŸ“</text>
  </view>
</view>
