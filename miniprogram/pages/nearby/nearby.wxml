<!--é™„è¿‘æ¨èé¡µ-->
<view class="page">
  <!-- åˆ†ç±»æ ‡ç­¾ -->
  <view class="category-tabs">
    <view 
      class="tab-item {{category === 'all' ? 'active' : ''}}" 
      bindtap="switchCategory" 
      data-category="all"
    >å…¨éƒ¨</view>
    <view 
      class="tab-item {{category === 'restaurant' ? 'active' : ''}}" 
      bindtap="switchCategory" 
      data-category="restaurant"
    >ğŸ½ï¸ é¤å…</view>
    <view 
      class="tab-item {{category === 'hotel' ? 'active' : ''}}" 
      bindtap="switchCategory" 
      data-category="hotel"
    >ğŸ¨ é…’åº—</view>
    <view 
      class="tab-item {{category === 'scenic' ? 'active' : ''}}" 
      bindtap="switchCategory" 
      data-category="scenic"
    >ğŸï¸ æ™¯ç‚¹</view>
  </view>

  <!-- å•†æˆ·åˆ—è¡¨ -->
  <view class="place-list" wx:if="{{places.length > 0}}">
    <view class="place-card" wx:for="{{places}}" wx:key="id">
      <image class="place-image" src="{{item.image || '/images/default-place.png'}}" mode="aspectFill"></image>
      <view class="place-info">
        <view class="place-header">
          <text class="place-name">{{item.name}}</text>
          <view class="place-rating">
            <text class="rating-star">â­</text>
            <text class="rating-value">{{item.rating}}</text>
          </view>
        </view>
        <view class="place-tags">
          <text class="tag">{{item.categoryText}}</text>
          <text class="tag" wx:if="{{item.priceLevel}}">{{item.priceLevel}}</text>
        </view>
        <text class="place-address">ğŸ“ {{item.address}}</text>
        <view class="place-distance">
          <text>è·ç¦» {{item.distance}}</text>
        </view>
        <view class="place-actions">
          <button class="action-btn" bindtap="callPhone" data-phone="{{item.phone}}" wx:if="{{item.phone}}">
            ğŸ“ ç”µè¯
          </button>
          <button class="action-btn primary" bindtap="navigate" data-place="{{item}}">
            ğŸ§­ å¯¼èˆª
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:elif="{{!loading}}">
    <text class="empty-icon">ğŸ“</text>
    <text class="empty-text">é™„è¿‘æš‚æ— {{categoryText}}æ¨è</text>
    <button class="btn btn-outline" bindtap="refreshLocation">åˆ·æ–°ä½ç½®</button>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>æ­£åœ¨æœç´¢é™„è¿‘å•†æˆ·...</text>
  </view>
</view>
