<!--é¦–é¡µ-->
<view class="page">
  <!-- é¡¶éƒ¨å¤©æ°”å¡ç‰‡ -->
  <view class="weather-card" wx:if="{{weather}}">
    <view class="weather-bg">
      <view class="weather-content">
        <view class="weather-left">
          <text class="weather-icon">{{weather.icon}}</text>
          <view class="weather-info">
            <text class="temperature">{{weather.temperature}}Â°C</text>
            <text class="weather-desc">{{weather.description}}</text>
          </view>
        </view>
        <view class="weather-right">
          <text class="location-name">{{weather.city || 'å½“å‰ä½ç½®'}}</text>
          <text class="weather-detail">æ¹¿åº¦ {{weather.humidity}}% Â· é£é€Ÿ {{weather.windSpeed}}m/s</text>
        </view>
      </view>
    </view>
  </view>
  <view class="weather-card weather-loading" wx:else>
    <text class="text-white">æ­£åœ¨è·å–å¤©æ°”ä¿¡æ¯...</text>
  </view>

  <!-- åŠŸèƒ½å…¥å£ -->
  <view class="feature-grid">
    <view class="feature-item" bindtap="goToDiaryEdit">
      <view class="feature-icon bg-green">
        <text>ğŸ“</text>
      </view>
      <text class="feature-text">å†™æ—¥è®°</text>
    </view>
    <view class="feature-item" bindtap="goToFootprints">
      <view class="feature-icon bg-blue">
        <text>ğŸ—ºï¸</text>
      </view>
      <text class="feature-text">è¶³è¿¹åœ°å›¾</text>
    </view>
    <view class="feature-item" bindtap="goToWeather">
      <view class="feature-icon bg-orange">
        <text>ğŸŒ¤ï¸</text>
      </view>
      <text class="feature-text">å¤©æ°”æŸ¥è¯¢</text>
    </view>
    <view class="feature-item" bindtap="goToNearby">
      <view class="feature-icon bg-purple">
        <text>ğŸ“</text>
      </view>
      <text class="feature-text">é™„è¿‘æ¨è</text>
    </view>
  </view>

  <!-- æœ€æ–°æ—¥è®° -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">æœ€æ–°æ—¥è®°</text>
      <text class="section-more" bindtap="goToDiaryList">æŸ¥çœ‹å…¨éƒ¨ ></text>
    </view>
    
    <view class="diary-list" wx:if="{{diaries.length > 0}}">
      <view class="diary-item" wx:for="{{diaries}}" wx:key="id" bindtap="goToDiaryDetail" data-id="{{item.id}}">
        <image class="diary-cover" src="{{item.coverImage || '/images/default-cover.png'}}" mode="aspectFill"></image>
        <view class="diary-info">
          <text class="diary-title">{{item.title}}</text>
          <text class="diary-summary">{{item.summary}}</text>
          <view class="diary-meta">
            <text class="diary-location" wx:if="{{item.locationName}}">ğŸ“ {{item.locationName}}</text>
            <text class="diary-date">{{item.createTimeText}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="empty-state" wx:else>
      <text class="empty-icon">ğŸ“”</text>
      <text class="empty-text">è¿˜æ²¡æœ‰æ—¥è®°ï¼Œå¿«å»è®°å½•ä½ çš„æ—…è¡Œå§ï¼</text>
      <button class="btn btn-primary" bindtap="goToDiaryEdit">å†™ç¬¬ä¸€ç¯‡æ—¥è®°</button>
    </view>
  </view>
</view>
