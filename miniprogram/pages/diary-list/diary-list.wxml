<!--æ—¥è®°åˆ—è¡¨é¡µ-->
<view class="page">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input-wrap">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" placeholder="æœç´¢æ—¥è®°æ ‡é¢˜æˆ–å†…å®¹" value="{{searchKeyword}}" bindinput="onSearchInput" bindconfirm="onSearch"/>
    </view>
  </view>

  <!-- æ—¥è®°åˆ—è¡¨ -->
  <view class="diary-list" wx:if="{{diaries.length > 0}}">
    <view class="diary-card" wx:for="{{diaries}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
      <!-- å°é¢å›¾ -->
      <image class="diary-cover" wx:if="{{item.coverImage}}" src="{{item.coverImage}}" mode="aspectFill"></image>
      <view class="diary-cover diary-cover-placeholder" wx:else>
        <text>ğŸ“”</text>
      </view>
      
      <!-- å†…å®¹ -->
      <view class="diary-content">
        <view class="diary-header">
          <text class="diary-title">{{item.title}}</text>
          <text class="diary-date">{{item.createTimeText}}</text>
        </view>
        <text class="diary-summary">{{item.summary}}</text>
        <view class="diary-footer">
          <view class="diary-location" wx:if="{{item.locationName}}">
            <text class="location-icon">ğŸ“</text>
            <text class="location-text">{{item.locationName}}</text>
          </view>
          <view class="diary-weather" wx:if="{{item.weather}}">
            <text>{{item.weather}} {{item.temperature}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:elif="{{!loading}}">
    <text class="empty-icon">ğŸ“</text>
    <text class="empty-text">{{searchKeyword ? 'æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ—¥è®°' : 'è¿˜æ²¡æœ‰æ—¥è®°ï¼Œå¿«å»è®°å½•æ—…è¡Œå§ï¼'}}</text>
    <button class="btn btn-primary" bindtap="goToEdit" wx:if="{{!searchKeyword}}">å†™ç¬¬ä¸€ç¯‡æ—¥è®°</button>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore && diaries.length > 0}}">
    <text wx:if="{{loadingMore}}">åŠ è½½ä¸­...</text>
    <text wx:else bindtap="loadMore">åŠ è½½æ›´å¤š</text>
  </view>

  <!-- å†™æ—¥è®°æŒ‰é’® -->
  <view class="fab" bindtap="goToEdit">
    <text>+</text>
  </view>
</view>
